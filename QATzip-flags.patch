--- QATzip-1.0.8/configure.ac.orig	2022-08-26 23:27:15.506327523 +0200
+++ QATzip-1.0.8/configure.ac	2022-08-27 08:20:19.899719857 +0200
@@ -214,7 +214,7 @@ AS_IF([test "x${CFLAGS}" = "x"],
                  -fno-delete-null-pointer-checks -fwrapv'
     ],
     [
-        CFLAGS+=' -Wall -Werror -std=gnu99 -pedantic \
+        CFLAGS="$CFLAGS"' -Wall -Werror -std=gnu99 -pedantic \
                   -fstack-protector -fPIE -fPIC -fno-strict-overflow \
                   -fno-delete-null-pointer-checks -fwrapv'
     ]
@@ -225,10 +225,10 @@ AC_MSG_RESULT([yes])
 AC_MSG_CHECKING([ldflags])
 AS_IF([test "x${LDFLAGS}" = "x"],
     [
-        LDFLAGS=' -fstack-protector -fPIC -pie -z relro -z now -Wl,-z,noexecstack'
+        LDFLAGS=' -fPIC -pie -z relro -z now -Wl,-z,noexecstack'
     ],
     [
-        LDFLAGS+=' -fstack-protector -fPIC -pie -z relro -z now -Wl,-z,noexecstack'
+        LDFLAGS="$LDFLAGS -fPIC -pie -z relro -z now -Wl,-z,noexecstack"
     ]
 )
 AC_MSG_RESULT([yes])
@@ -238,11 +238,10 @@ AC_ARG_ENABLE(debug,
     AS_HELP_STRING([--enable-debug], [Enable debug mode]),
     [
         debug=true
-        CFLAGS+=' -g -DQATZIP_DEBUG -O0'
+        CFLAGS="$CFLAGS -DQATZIP_DEBUG"
     ]      ,
     [
         debug=false
-        CFLAGS+=' -O2 -D_FORTIFY_SOURCE=2'
     ]
 )
 AM_CONDITIONAL([QATZIP_DEBUG_AC], [test x$debug = xtrue])
@@ -252,7 +251,7 @@ AC_ARG_ENABLE(symbol,
     AS_HELP_STRING([--enable-symbol], [Enable qatzip symbol]),
     [
         symbol=true
-        CFLAGS+=' -g'
+        CFLAGS="$CFLAGS -g"
     ],
     [
         symbol=false
